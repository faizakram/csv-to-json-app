<div class="file-upload-container">
  <h2>CSV to JSON Converter</h2>
  <p class="description">
    Advanced CSV converter supporting:
    • Array-style columns like <code>field[0]</code>, <code>item[1]</code>
    • Comma-separated values conversion
    • Automatic data normalization
    • Numeric field integer conversion
  </p>
  
  <div class="upload-section" 
       [class.drag-over]="isDragOver()"
       (dragover)="onDragOver($event)"
       (dragleave)="onDragLeave($event)"
       (drop)="onDrop($event)">
    
    <div class="drag-drop-area">
      <div class="upload-icon-large">📁</div>
      <h3>Drag & Drop CSV Files Here</h3>
      <p class="drag-text">or click to browse</p>
      
      <div class="file-input-wrapper">
        <input 
          type="file" 
          id="csvFile" 
          accept=".csv" 
          (change)="onFileSelected($event)"
          class="file-input"
        />
        <label for="csvFile" class="file-label">
          <span class="upload-icon">📁</span>
          Choose CSV File
        </label>
      </div>
    </div>
    
    @if (fileName()) {
      <div class="file-info">
        <p>Selected: {{ fileName() }}</p>
      </div>
    }
    
    @if (isLoading()) {
      <div class="loading">
        <span class="spinner"></span>
        Processing CSV...
      </div>
    }
    
    @if (error()) {
      <div class="error-message">
        {{ error() }}
      </div>
    }
  </div>
  
  @if (jsonData() && !isLoading()) {
    <div class="results-section">
      <div class="action-buttons">
        <button (click)="downloadJSON()" class="download-btn">
          📥 Download JSON
        </button>
        <button (click)="copyToClipboard()" class="copy-btn" [class.success]="copySuccess()">
          @if (copySuccess()) {
            ✅ Copied!
          } @else {
            📋 Copy JSON
          }
        </button>
        <button (click)="clearData()" class="clear-btn">
          🗑️ Clear
        </button>
      </div>
      
      <div class="json-preview">
        <h3>JSON Preview:</h3>
        <pre class="json-output">{{ jsonData() }}</pre>
      </div>
    </div>
  }
</div>
